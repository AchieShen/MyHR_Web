@model IEnumerable<MyHR_Web.ViewModel.TLeaveApplicationViewModel>

@{
    ViewData["Title"] = "LeaveList";
}
<div class="content-wrapper">
    <section class="content-header">


        <header>
            <style>
                .row {
                    display: flex;
                    flex-wrap: wrap;
                }

                .col {
                    flex-grow: 1;
                    margin: 15px;
                    text-align: center;
                    font-size: 20px;
                    font-family: 微軟正黑體;
                    font-weight: normal;
                }

                h2 {
                    background-color: #cbb2ae;
                    border-left: 5px solid #808080;
                    font-family: "微软雅黑", "宋体", "黑体", Arial;
                    font-size: 25px;
                    height: 80px;
                    line-height: 80px;
                    font-weight: bold;
                    text-shadow: 2px 2px 3px #222222;
                    color: #FFFFFF;
                    padding-left: 10px;
                }
            </style>
        </header>


        <h2>請假系統/查詢</h2>

        @*<button type="button" class="btn btn-block btn-info btn-lg">Info</button>*@

        @Html.ActionLink("請假申請", "LeaveCreate", new { }, new { @class = "btn  btn-primary btn-lg", style = "filter: grayscale(50%)" })
        @Html.ActionLink("請假查詢", "LeaveCreate", new { }, new { @class = "btn  btn-info btn-lg", style = "filter: grayscale(50%)" })

        <br /><br />
        <form method="post">
            <div class="container">
                <div style="background-color:papayawhip ;padding:20px; border-radius:10px">

                    <i>子分類查詢</i>
                    <div class="row">
                        <div class="col">
                            <label class="col-lg-12 control-label">請假申請日期(起) :  <input type="date" name="Leave_Startday" /></label>
                        </div>

                        <div class="col">
                            <label class="col-lg-12 control-label">請假申請日期(迄) :  <input type="date" name="Leave_Endday" /></label>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col">

                            <p>請假類別:</p>
                            <select id="Leave_Cate">
                               
                            </select>
                        </div>
                        <div class="col">

                            <p>審核狀態:</p>
                            <select id="Status">
                                
                            </select>
                        </div>

                    </div>

                    <div class="row">

                        <div class="col">

                            <input type="submit" value="查詢" onclick="btn_LeaveSearsh" class="btn btn-success float-right" style="filter: grayscale(50%)" />
                        </div>


                    </div>
                    @*<div class="col"></div> 有要塞三行可開  *@
                </div>
            </div>

            <br />
        </form>

        <div class="card">
            <div class="card-header">
                <table table class="table table-bordered table-hover">
                    <thead>
                        <tr style="text-align:center">
                            @*<th>
                                    @Html.DisplayNameFor(model => model.CApplyNumber)
                                </th>*@
                            <th>
                                @Html.DisplayNameFor(model => model.CDepartmentId)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CEmployeeId)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CApplyDate)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CLeaveCategory)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CLeaveStartTime)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CLeaveEndTime)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CReason)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CCheckStatus)
                            </th>
                            <th>
                                修改/刪除
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr style="text-align:center">
                                @*<td>
                                        @Html.DisplayFor(modelItem => item.CApplyNumber)
                                    </td>*@
                                <td id="Leave_DepId">
                                    @*@Html.DisplayFor(modelItem => item.CDepartmentId)*@
                                    @Enum.GetName(typeof(eDepartment), item.CDepartmentId)
                                </td>
                                <td>
                                    @*@Html.DisplayFor(modelItem => item.CEmployeeId)*@
                                    @ViewData["CURRENT_LOGINED_USERNAME"]
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CApplyDate)
                                </td>
                                <td>
                                    @Enum.GetName(typeof(eLeaveCategory), item.CLeaveCategory)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CLeaveStartTime)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CLeaveEndTime)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CReason)
                                </td>
                                <td>
                                    @Enum.GetName(typeof(eStatus),item.CCheckStatus)
                                    @*@Html.DisplayFor(modelItem => item.CCheckStatus)*@
                                </td>
                                <td>
                                    @{ if (@item.CCheckStatus == 1)
                                        {
                                @Html.ActionLink("修改", "Edit", new { id = item.CApplyNumber }, new { @class = "btn btn-success" }) @:&nbsp;&nbsp;&nbsp;
                                @Html.ActionLink("刪除", "Delete", new { id = item.CApplyNumber }, new { @class = "btn btn-danger", onclick = "return(confirm('確定要刪除此申請單嗎'))", style = "filter: grayscale(50%)", }) } }
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </section>
</div>

<script type="text/javascript">
     
    var categorys = ['請選擇','病假', '事假', '生理假', '喪假', '特休'];   /*顯示請假類別下拉是選單*/
    var categorySelect = document.getElementById("Leave_Cate");
    var cat_inner = "";
    for (var i = 0; i < categorys.length; i++) {
        cat_inner = cat_inner + '<option value='+i+'>' + categorys[i] + '</option>';
    }
    categorySelect.innerHTML = cat_inner;

    var Leave_ststus = ['請選擇','審核中', '通過', '退件'];/*顯示檢核類別下拉是選單*/
    var statusSelect = document.getElementById("Status");
    var sta_inner = "";
    for (var i = 0; i < Leave_ststus.length; i++) {
        sta_inner = sta_inner + '<option value=' + i + '>' + Leave_ststus[i] + '</option>';
    }
   
    statusSelect.innerHTML = sta_inner;


   /* var Deps = ['管理部', '企劃部', '研發部', '資訊部', '總務部','財會部'];*/
    
    
    
    
    
    
    



</script>