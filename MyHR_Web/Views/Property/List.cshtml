@model IEnumerable<MyHR_Web.ViewModel.CPropertyViewModel>
@using Microsoft.AspNetCore.Http;


@{
    ViewData["Title"] = "List";
    DateTime? startdate = ViewBag.startdate;
    DateTime? enddate = ViewBag.enddate;
    string userid = Context.Session.GetString("CURRENT_LOGINED_USERID");
}

<div class="content-wrapper">
    <section class="content-header">


        <header>
            <style>
                .row {
                    display: flex;
                    flex-wrap: wrap;
                }

                .col {
                    flex-grow: 1;
                    margin: 15px;
                    text-align: center;
                    font-size: 20px;
                    font-family: 微軟正黑體;
                    font-weight: normal;
                }

                h2 {
                    background-color: #cbb2ae;
                    border-left: 5px solid #808080;
                    font-family: "微软雅黑", "宋体", "黑体", Arial;
                    font-size: 25px;
                    height: 80px;
                    line-height: 80px;
                    font-weight: bold;
                    text-shadow: 2px 2px 3px #222222;
                    color: #FFFFFF;
                    padding-left: 10px;
                }
            </style>
        </header>
        <h2>失物招領系統</h2>

        @Html.ActionLink("新增失物", "Create", new { }, new { @type = "button", @class = "btn btn-primary", style = "filter: grayscale(50%)" })
        @Html.ActionLink("失物查詢", "List", new { }, new { @type = "button", @class = "btn btn-info", style = "filter: grayscale(50%)" })
        <br /><br />
        <form method="post">
            <div class="container">
                <div style="background-color:papayawhip;padding:20px; border-radius:10px">
                    <i>查詢條件</i>
                    <div class="row">
                        <div class="col">
                            <label class=" col-lg-12 control-label">
                                申請日期(起) :<input type="date" name="startdate" value="@startdate?.ToString("yyyy-MM-dd")" />
                            </label>
                        </div>
                        <div class="col">
                            <label class=" col-lg-12 control-label">
                                申請日期(迄) :<input type="date" name="enddate" value="@enddate?.ToString("yyyy-MM-dd")" />
                            </label>

                            @Html.ActionLink("重新查詢", "List", new { }, new { @class = "btn btn-success float-right", style = "filter: grayscale(50%)" })
                            <br />

                            <input type="submit" value="查詢" class="btn btn-primary float-right" style="filter: grayscale(50%)" />
                        </div>

                    </div>


        </form>

</div>

              

            <table table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        @*<th>
                            @Html.DisplayNameFor(model => model.CPropertyId)
                        </th>*@
                        <th>
                            @Html.DisplayNameFor(model => model.CEmployeeId)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.CEmployeeName)
                        </th>
                        <th>
                            部門@*@Html.DisplayNameFor(model => model.CDeparmentId)*@
                        </th>
                        @*<th>
                            @Html.DisplayNameFor(model => model.CPhone)
                        </th>*@
                        <th>
                            @Html.DisplayNameFor(model => model.CPropertySubjectId)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.CPropertyCategoryId)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.CPropertyPhoto)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.CProperty)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.CLostAndFoundDate)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.CLostAndFoundSpace)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.CtPropertyDescription)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.CPropertyCheckStatusId)
                        </th>
                        <th>修改/刪除</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                <tr>
                    @*<td>
                        @Html.DisplayFor(modelItem => item.CPropertyId)
                    </td>*@
                    <td>
                        @Html.DisplayFor(modelItem => item.CEmployeeId)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CEmployeeName)
                    </td>
                    <td>
                        @Enum.GetName(typeof(eDepartment), item.CDeparmentId)
                    </td>
                    @*<td>
                        @Html.DisplayFor(modelItem => item.CPhone)
                    </td>*@
                    <td>
                        @Enum.GetName(typeof(eLostAndFoundSubject), item.CPropertySubjectId)
                    </td>
                    <td>
                        @Enum.GetName(typeof(eLostAndFoundCategory), item.CPropertyCategoryId)
                    </td>
                    <td>
                        <img src="@item.CPropertyPhoto" width="100" height="150" />
                        @*@Html.DisplayFor(modelItem => item.CPropertyPhoto)*@
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CProperty)
                    </td>
                    <td>
                        @Convert.ToString(string.Format("{0:yyyy/MM/dd}", item.CLostAndFoundDate))
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CLostAndFoundSpace)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CtPropertyDescription)
                    </td>
                    <td>
                        @Enum.GetName(typeof(eLostAndFoundCheckStatus), item.CPropertyCheckStatusId)
                    </td>
                    @if (userid == item.CEmployeeId.ToString())
                    {
                <td>
                    @Html.ActionLink("修改", "Edit", "Property", new { id = item.CPropertyId }, new { @class = "btn btn-success ", @style = "filter: grayscale(50%)", @type = "button" })
                    @Html.ActionLink("刪除", "Delete", "Property", new { id = item.CPropertyId }, new { @class = "btn btn-danger float-right", @style = "filter: grayscale(50%)", @type = "button", onclick = "return confirm('確定要刪除嗎?')" })
                </td>
                    }
                    else
                    {
                <td></td>
                    }

                </tr>
                    }
                </tbody>
            </table>
 
    </section>
</div>
